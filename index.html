<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Tube</title>
<style>
body {
    margin: 0;
    font-family: 'Helvetica Neue', Arial, sans-serif;
    background-color: #cccccc;
    color: #1c3d5a;
}
header {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 2px solid #1c3d5a;
}
.logo {
    font-weight: bold;
    font-size: 28px;
    color: black;
    background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
nav {
    display: flex;
    gap: 10px;
    padding: 10px 20px;
    background-color: #e0e0e0;
}
nav a {
    color: #1c3d5a;
    text-decoration: none;
    padding: 5px 12px;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
}
nav a:hover { text-decoration: underline; }
main { padding: 20px; max-width: 900px; margin: auto; }
section { display: none; }
section.active { display: block; }
h2 { border-bottom: 1px solid #1c3d5a; padding-bottom: 5px; }
.video-list div, .blog-post { margin: 8px 0; display: flex; align-items: center; justify-content: space-between; }
.video-item { text-decoration: underline; cursor: pointer; flex-grow: 1; }
video { display: block; margin: 15px 0; width: 100%; max-width: 800px; border: 2px solid #1c3d5a; border-radius: 5px; }
.blog-post { background-color: #d9d9d9; padding: 15px; margin-bottom: 15px; border-left: 4px solid #1c3d5a; border-radius: 4px; }
.blog-post img { max-width: 100%; margin: 10px 0; border-radius: 4px; }
.blog-post h3 { margin: 0 0 5px 0; }
.blog-post p { margin: 5px 0; }
footer { text-align: center; padding: 10px; border-top: 2px solid #1c3d5a; margin-top: 40px; }
input, textarea { width: 100%; margin: 5px 0 15px 0; padding: 8px; border-radius: 4px; border: 1px solid #1c3d5a; background: #fff; color: #000; }
button { padding: 6px 10px; margin-left: 10px; cursor: pointer; border: none; border-radius: 4px; background-color: #1c3d5a; color: #fff; }
button:hover { background-color: #14314d; }
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-storage-compat.js"></script>
</head>
<body>

<header>
    <div class="logo">The Tube</div>
</header>

<nav>
    <a onclick="showSection('home')">Home</a>
    <a onclick="showSection('videos')">Videos</a>
    <a onclick="showSection('blog')">Blog</a>
</nav>

<main>
    <!-- Home Section -->
    <section id="home" class="active">
        <h2>Welcome to The Tube</h2>
        <p>This is the homepage. Navigate to Videos or Blog to explore content!</p>
    </section>

    <!-- Videos Section -->
    <section id="videos">
        <h2>Videos</h2>
        <div id="videoList"></div>
        <h3>Add a Video</h3>
        <input type="text" id="videoName" placeholder="Video Name">
        <input type="file" id="videoFile" accept="video/mp4">
        <button onclick="addVideoFirebase()">Upload Video</button>
        <video id="player" controls>
            <source src="" type="video/mp4">
            Your browser does not support HTML video.
        </video>
    </section>

    <!-- Blog Section -->
    <section id="blog">
        <h2>Blog</h2>
        <div id="blogList"></div>
        <h3>Add a Blog Post</h3>
        <input type="text" id="blogTitle" placeholder="Title">
        <textarea id="blogContent" placeholder="Content (text or image URL)"></textarea>
        <button onclick="addBlogFirebase()">Add Blog Post</button>
    </section>
</main>

<footer>&copy; The Tube â€“ Share your videos and ideas.</footer>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyB9jbZPdb8NH667JHciVWh9uWG6pwFEcM0",
  authDomain: "the-tube-ae547.firebaseapp.com",
  projectId: "the-tube-ae547",
  storageBucket: "the-tube-ae547.firebasestorage.app",
  messagingSenderId: "1053434423925",
  appId: "1:1053434423925:web:55aa050ce5ef2c882aa63c",
  measurementId: "G-L8VS0LSEB3"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const storage = firebase.storage();

// Navigation
function showSection(sectionId){
    document.querySelectorAll('main section').forEach(s => s.classList.remove('active'));
    document.getElementById(sectionId).classList.add('active');
}

// Video upload
function addVideoFirebase() {
    const name = document.getElementById('videoName').value.trim();
    const file = document.getElementById('videoFile').files[0];
    if (!name || !file) return alert("Enter a name and select a file.");

    const storageRef = storage.ref('videos/' + file.name);
    storageRef.put(file).then(() => {
        storageRef.getDownloadURL().then(url => {
            db.ref('videos').push({name, url});
        });
    });

    document.getElementById('videoName').value = '';
    document.getElementById('videoFile').value = '';
}

// Render videos with delete
const videoList = document.getElementById('videoList');
db.ref('videos').on('value', snapshot => {
    videoList.innerHTML = '';
    snapshot.forEach(child => {
        const v = child.val();
        const key = child.key;
        const container = document.createElement('div');
        container.style.display = 'flex';
        container.style.justifyContent = 'space-between';
        container.style.alignItems = 'center';

        const div = document.createElement('div');
        div.className = 'video-item';
        div.textContent = v.name;
        div.onclick = () => { document.getElementById('player').src = v.url; };

        const delBtn = document.createElement('button');
        delBtn.textContent = 'Delete';
        delBtn.onclick = () => {
            storage.refFromURL(v.url).delete().then(() => {
                db.ref('videos/' + key).remove();
            });
        };

        container.appendChild(div);
        container.appendChild(delBtn);
        videoList.appendChild(container);
    });
});

// Blog upload
function addBlogFirebase() {
    const title = document.getElementById('blogTitle').value.trim();
    const content = document.getElementById('blogContent').value.trim();
    if (!title || !content) return;

    db.ref('blogs').push({title, content});
    document.getElementById('blogTitle').value = '';
    document.getElementById('blogContent').value = '';
}

// Render blogs with delete
const blogList = document.getElementById('blogList');
db.ref('blogs').on('value', snapshot => {
    blogList.innerHTML = '';
    snapshot.forEach(child => {
        const b = child.val();
        const key = child.key;
        const container = document.createElement('div');
        container.className = 'blog-post';
        container.innerHTML = `<h3>${b.title}</h3><p>${b.content}</p>`;

        const delBtn = document.createElement('button');
        delBtn.textContent = 'Delete';
        delBtn.onclick = () => { db.ref('blogs/' + key).remove(); };

        container.appendChild(delBtn);
        blogList.appendChild(container);
    });
});
</script>

</body>
</html>
